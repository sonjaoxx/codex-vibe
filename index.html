<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Преимущества поставщика автозапчастей из Японии</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Orbitron:wght@500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="scene">
      <section class="benefits" aria-labelledby="benefits-title">
        <div class="benefits__halo" aria-hidden="true"></div>
        <div class="benefits__grid">
          <header class="benefits__intro">
            <p class="benefits__eyebrow">Оптовые поставки из Японии</p>
            <h1 class="benefits__title" id="benefits-title">
              Скорость поставки, достойная трека «Судзука»
            </h1>
            <p class="benefits__description">
              Мы объединили прямые каналы с японскими аукционами, собственную логистику
              и цифровой контроль качества. Переключайте передачи на спидометре и смотрите,
              что получаете с командой «Дан Авто».
            </p>
            <div class="benefits__cta">
              <button class="benefits__button" type="button">Получить прайс-лист</button>
              <span class="benefits__note">Бесплатный подбор по VIN за 15 минут</span>
            </div>
          </header>
          <div class="benefits__instrument" data-active-index="0">
            <div class="speedometer" aria-hidden="true">
              <div class="speedometer__ambient" aria-hidden="true"></div>
              <div class="speedometer__dial" aria-hidden="true">
                <div class="speedometer__ticks speedometer__ticks--minor"></div>
                <div class="speedometer__ticks speedometer__ticks--major"></div>
                <div class="speedometer__arc"></div>
                <div class="speedometer__needle"></div>
                <div class="speedometer__hub"></div>
              </div>
              <div class="speedometer__shadow" aria-hidden="true"></div>
            </div>
            <div class="speedometer__value" aria-live="polite">
              <span class="speedometer__badge">Режим передачи</span>
              <span class="speedometer__label">Готовность отгрузки</span>
              <span class="speedometer__metric">
                <span class="speedometer__number">24</span>
                <span class="speedometer__unit">часа</span>
              </span>
            </div>
          </div>
          <ul class="benefits__list" role="list">
              <li
                class="benefit-card is-active"
                tabindex="0"
                data-angle="26"
                data-speed="24"
                data-decimals="0"
                data-label="Готовность отгрузки"
                data-unit="часа"
              >
                <span class="benefit-card__id">01</span>
                <h3 class="benefit-card__title">Отгрузка за 24 часа из Владивостока</h3>
                <p class="benefit-card__text">
                  Собственный склад, слингование крупных узлов и упаковка без очереди —
                  груз уходит в рейс в день оплаты.
                </p>
                <span class="benefit-card__badge">24/7 логистика</span>
              </li>
              <li
                class="benefit-card"
                tabindex="0"
                data-angle="92"
                data-speed="312"
                data-decimals="0"
                data-label="Проверенных поставщиков"
                data-unit="партнёров"
              >
                <span class="benefit-card__id">02</span>
                <h3 class="benefit-card__title">Закупка напрямую с японских аукционов</h3>
                <p class="benefit-card__text">
                  Лицензии на Torakku, USS, IAA и другие торги. Фиксируем ставки и курс, чтобы
                  вы выигрывали детали без переплат посредникам.
                </p>
                <span class="benefit-card__badge">Токио → Владивосток</span>
              </li>
              <li
                class="benefit-card"
                tabindex="0"
                data-angle="156"
                data-speed="99.4"
                data-decimals="1"
                data-label="Точность VIN-подбора"
                data-unit="%"
              >
                <span class="benefit-card__id">03</span>
                <h3 class="benefit-card__title">VIN-подбор и техэкспертиза перед отправкой</h3>
                <p class="benefit-card__text">
                  Проверяем каталоги производителей, подбираем аналоги и подтверждаем совместимость
                  на стенде, чтобы заказчик получал только подходящие узлы.
                </p>
                <span class="benefit-card__badge">Инженеры на связи</span>
              </li>
              <li
                class="benefit-card"
                tabindex="0"
                data-angle="214"
                data-speed="18"
                data-decimals="0"
                data-label="Месяцев расширенной гарантии"
                data-unit="гарантии"
              >
                <span class="benefit-card__id">04</span>
                <h3 class="benefit-card__title">Расширенная гарантия на оригинальные детали</h3>
                <p class="benefit-card__text">
                  Сертифицированные поставки, прозрачная история детали и замена без споров, если
                  обнаружен заводской брак.
                </p>
                <span class="benefit-card__badge">Оригинал 100%</span>
              </li>
            </ul>
        </div>
      </section>
    </main>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const instrument = document.querySelector('.benefits__instrument');
        const cards = Array.from(document.querySelectorAll('.benefit-card'));
        const meter = document.querySelector('.speedometer');
        const numberEl = document.querySelector('.speedometer__number');
        const labelEl = document.querySelector('.speedometer__label');
        const unitEl = document.querySelector('.speedometer__unit');
        let activeIndex = 0;
        let autoTimer = null;
        let resumeTimer = null;

        if (!instrument || !cards.length || !meter || !numberEl || !labelEl || !unitEl) {
          return;
        }

        const setActiveCard = (nextCard, index, options = { animate: true }) => {
          if (!nextCard) return;
          const { animate = true } = options;

          cards.forEach((card) => card.classList.toggle('is-active', card === nextCard));
          instrument.dataset.activeIndex = index.toString();

          const angle = Number(nextCard.dataset.angle || '0');
          meter.style.setProperty('--angle', angle);

          if (animate) {
            meter.classList.remove('is-energized');
            void meter.offsetWidth;
            meter.classList.add('is-energized');
          }

          const decimals = Number(nextCard.dataset.decimals || '0');
          const rawValue = Number(nextCard.dataset.speed || '0');
          const formatted = Number.isFinite(rawValue)
            ? rawValue.toLocaleString('ru-RU', {
                minimumFractionDigits: decimals,
                maximumFractionDigits: decimals,
              })
            : nextCard.dataset.speed || '';
          numberEl.textContent = formatted;
          labelEl.textContent = nextCard.dataset.label || '';
          unitEl.textContent = nextCard.dataset.unit || '';
          activeIndex = index;
        };

        const stopAuto = () => {
          if (autoTimer) {
            clearInterval(autoTimer);
            autoTimer = null;
          }
          if (resumeTimer) {
            clearTimeout(resumeTimer);
            resumeTimer = null;
          }
        };

        const scheduleAuto = () => {
          stopAuto();
          resumeTimer = setTimeout(() => {
            autoTimer = setInterval(() => {
              const nextIndex = (activeIndex + 1) % cards.length;
              setActiveCard(cards[nextIndex], nextIndex);
            }, 4200);
          }, 3200);
        };

        cards.forEach((card, index) => {
          card.addEventListener('pointerenter', () => {
            stopAuto();
            setActiveCard(card, index);
          });

          card.addEventListener('focus', () => {
            stopAuto();
            setActiveCard(card, index);
          });

          card.addEventListener('pointerleave', () => {
            scheduleAuto();
          });

          card.addEventListener('blur', () => {
            scheduleAuto();
          });
        });

        setActiveCard(cards[0], 0, { animate: false });
        scheduleAuto();
      });
    </script>
  </body>
</html>
